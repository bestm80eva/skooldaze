<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Skool Daze: Routine at 30156</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../microsphere.css" />
<link rel="stylesheet" type="text/css" href="../skool.css" />
<link rel="stylesheet" type="text/css" href="../sd.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="30132.html">30132</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#30156">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="30203.html">30203</a></span></td>
</tr>
</table>
<div class="description">30156: Print a reprimand message</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="30464.html">30464</a>. Generates the graphic data for the text of a reprimand message (e.g. 'NOW FIND A SEAT') in the buffer at <a class="link" href="60416.html">60416</a>, and then copies the buffer to the screen.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">Reprimand message identifier (0-15)</td>
</tr>
<tr>
<td class="register">DE</td>
<td class="register-desc">Attribute file address</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30156"></a>30156</td>
<td class="instruction">PUSH DE</td>
<td class="comment-11" rowspan="1">Save the attribute file address</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30157"></a>30157</td>
<td class="instruction">RRCA</td>
<td class="comment-11" rowspan="11">Point <span class="register">HL</span> at the appropriate message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30158"></a>30158</td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30159"></a>30159</td>
<td class="instruction">LD H,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30160"></a>30160</td>
<td class="instruction">AND 192</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30162"></a>30162</td>
<td class="instruction">SCF</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30163"></a>30163</td>
<td class="instruction">RRA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30164"></a>30164</td>
<td class="instruction">LD L,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30165"></a>30165</td>
<td class="instruction">LD A,H</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30166"></a>30166</td>
<td class="instruction">AND 3</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30168"></a>30168</td>
<td class="instruction">ADD A,219</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30170"></a>30170</td>
<td class="instruction">LD H,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30171"></a>
<div class="comments">
<div class="paragraph">
Now <span class="register">HL</span> points at the appropriate message.
</div>
<div class="paragraph">
<table class="default">
<tr>
<th><span class="register">A</span></th>
<th><span class="register">HL</span></th>
<th>Message</th>
</tr>
<tr>
<td class="centre">0</td>
<td><a class="link" href="56192.html">56192</a></td>
<td>DON'T SIT ON THE STAIRS</td>
</tr>
<tr>
<td class="centre">1</td>
<td><a class="link" href="56224.html">56224</a></td>
<td>THE ROOM IS PRIVATE</td>
</tr>
<tr>
<td class="centre">2</td>
<td><a class="link" href="56256.html">56256</a></td>
<td>GET TO WHERE YOU SHOULD BE</td>
</tr>
<tr>
<td class="centre">3</td>
<td><a class="link" href="56288.html">56288</a></td>
<td>NOW FIND A SEAT</td>
</tr>
<tr>
<td class="centre">4</td>
<td><a class="link" href="56448.html">56448</a></td>
<td>GET OFF THE FLOOR</td>
</tr>
<tr>
<td class="centre">5</td>
<td><a class="link" href="56480.html">56480</a></td>
<td>COME ALONG WITH ME BOY</td>
</tr>
<tr>
<td class="centre">6</td>
<td><a class="link" href="56512.html">56512</a></td>
<td>HURRY UP YOU HORROR</td>
</tr>
<tr>
<td class="centre">7</td>
<td><a class="link" href="56544.html">56544</a></td>
<td>DON'T TRY MY PATIENCE BOY</td>
</tr>
<tr>
<td class="centre">8</td>
<td><a class="link" href="56704.html">56704</a></td>
<td>NOW DON'T DO IT AGAIN</td>
</tr>
<tr>
<td class="centre">9</td>
<td><a class="link" href="56736.html">56736</a></td>
<td>DON'T TELL TALES</td>
</tr>
<tr>
<td class="centre">10</td>
<td><a class="link" href="56768.html">56768</a></td>
<td>NEVER BE LATE AGAIN</td>
</tr>
<tr>
<td class="centre">11</td>
<td><a class="link" href="56800.html">56800</a></td>
<td>AND STAY THIS TIME</td>
</tr>
<tr>
<td class="centre">12</td>
<td><a class="link" href="56960.html">56960</a></td>
<td>DON'T TOUCH BLACKBOARDS</td>
</tr>
<tr>
<td class="centre">13</td>
<td><a class="link" href="56992.html">56992</a></td>
<td>CATAPULTS ARE FORBIDDEN</td>
</tr>
<tr>
<td class="centre">14</td>
<td><a class="link" href="57024.html">57024</a></td>
<td>DON'T HIT YOUR MATES</td>
</tr>
<tr>
<td class="centre">15</td>
<td><a class="link" href="57056.html">57056</a></td>
<td>YOU ARE NOT A KANGAROO</td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30171"></a>30171</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">Save the message address</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30172"></a>30172</td>
<td class="instruction">LD DE,60464</td>
<td class="comment-11" rowspan="1"><a class="link" href="60416.html#60464">60464</a>=appropriate lines bubble graphic buffer address for the first line of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30175"></a>30175</td>
<td class="instruction">CALL <a class="link" href="30042.html">30042</a></td>
<td class="comment-11" rowspan="1">Write the first line of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30178"></a>30178</td>
<td class="instruction">CALL <a class="link" href="30132.html">30132</a></td>
<td class="comment-11" rowspan="1">Draw the left and right edges of the bubble</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30181"></a>30181</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">Restore the message address to <span class="register">HL</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30182"></a>30182</td>
<td class="instruction">LD A,L</td>
<td class="comment-11" rowspan="3">Point <span class="register">HL</span> at the second half of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30183"></a>30183</td>
<td class="instruction">ADD A,16</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30185"></a>30185</td>
<td class="instruction">LD L,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30186"></a>30186</td>
<td class="instruction">LD DE,60528</td>
<td class="comment-11" rowspan="1"><a class="link" href="60416.html#60528">60528</a>=appropriate lines bubble graphic buffer address for the second line of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30189"></a>30189</td>
<td class="instruction">CALL <a class="link" href="30042.html">30042</a></td>
<td class="comment-11" rowspan="1">Write the second line of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30192"></a>30192</td>
<td class="instruction">CALL <a class="link" href="30132.html">30132</a></td>
<td class="comment-11" rowspan="1">Draw the left and right edges of the bubble</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30195"></a>30195</td>
<td class="instruction">LD B,0</td>
<td class="comment-11" rowspan="1">Prepare <span class="register">B</span> for the routine at <a class="link" href="29977.html#30001">30001</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30197"></a>30197</td>
<td class="instruction">LD HL,60440</td>
<td class="comment-11" rowspan="1"><a class="link" href="60416.html#60440">60440</a>=first byte of the graphic data in the lines bubble graphic buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30200"></a>30200</td>
<td class="instruction">JP <a class="link" href="29977.html#30001">30001</a></td>
<td class="comment-11" rowspan="1">Transfer the lines bubble graphic data to the screen (the lines bubble attribute bytes are already on-screen)</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="30132.html">30132</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#30156">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="30203.html">30203</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Skool Daze RAM disassembly 20140614</div>
<div class="copyright">&#169; 1984 Microsphere Computer Services Ltd (Skool Daze). &#169; 2014 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://pyskool.ca/?page_id=177">SkoolKit</a> 4.0.</div>
</div>
</body>
</html>