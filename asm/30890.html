<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Skool Daze: Routine at 30890</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../sd.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="Skool Daze" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="30888.html">30888</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#30890">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="31034.html">31034</a></span></td>
</tr>
</table>
<div class="description">30890: Make a teacher give lines to the closest main kid</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="27196.html">27196</a>. Makes a teacher who has been knocked over give lines to the closest main kid (if any).
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">Teacher's character number (163-166)</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30890"></a>30890</td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30891"></a>30891</td>
<td class="instruction">LD A,(32763)</td>
<td class="comment-11" rowspan="1">Copy ERIC's status flags from <a class="link" href="32763.html">32763</a> to <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30894"></a>30894</td>
<td class="instruction">LD HL,44130</td>
<td class="comment-11" rowspan="4">Pick up ERIC's coordinates in <span class="register">DE</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30897"></a>30897</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30898"></a>30898</td>
<td class="instruction">DEC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30899"></a>30899</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30900"></a>30900</td>
<td class="instruction">LD BC,910</td>
<td class="comment-11" rowspan="1"><span class="register">B</span>=3 (number of main kids besides ERIC), <span class="register">C</span>=LSB of <a class="link" href="32652.html#32654">32654</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30903"></a>30903</td>
<td class="instruction">BIT 2,A</td>
<td class="comment-11" rowspan="1">Is ERIC jumping?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30905"></a>30905</td>
<td class="instruction">JR Z,30924</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30907"></a>30907</td>
<td class="instruction">LD A,D</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=ERIC's y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30908"></a>30908</td>
<td class="instruction">LD D,155</td>
<td class="comment-11" rowspan="1">155=top floor</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30910"></a>30910</td>
<td class="instruction">CP 156</td>
<td class="comment-11" rowspan="1">Is ERIC jumping on the top floor?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30912"></a>30912</td>
<td class="instruction">JR C,30927</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30914"></a>30914</td>
<td class="instruction">LD D,162</td>
<td class="comment-11" rowspan="1">162=middle floor</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30916"></a>30916</td>
<td class="instruction">CP 163</td>
<td class="comment-11" rowspan="1">Is ERIC jumping on the middle floor?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30918"></a>30918</td>
<td class="instruction">JR C,30927</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30920"></a>30920</td>
<td class="instruction">LD D,169</td>
<td class="comment-11" rowspan="1">169=bottom floor</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30922"></a>30922</td>
<td class="instruction">JR 30927</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30924"></a>30924</td>
<td class="instruction">CALL <a class="link" href="28304.html#28310">28310</a></td>
<td class="comment-11" rowspan="1">Get the floor nearest ERIC (155, 162, 169) in <span class="register">D</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30927"></a>30927</td>
<td class="instruction">LD (32652),DE</td>
<td class="comment-11" rowspan="1">Store ERIC's normalised coordinates in <a class="link" href="32652.html">32652</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30931"></a>
<div class="comments">
<div class="paragraph">
Here we enter a loop that calculates BOY WANDER's, ANGELFACE's and EINSTEIN's normalised coordinates and stores them in <a class="link" href="32652.html#32654">32654</a>, <a class="link" href="32652.html#32656">32656</a> and <a class="link" href="32652.html#32658">32658</a> respectively. (If a character's coordinates are (x, y), then his normalised coordinates are (x, Y), where Y=155, 162, 169, i.e. the y-coordinate of the floor he is closest to.)
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30931"></a>30931</td>
<td class="instruction">LD H,167</td>
<td class="comment-11" rowspan="1">167=BOY WANDER</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30933"></a>30933</td>
<td class="instruction">CALL <a class="link" href="28304.html">28304</a></td>
<td class="comment-11" rowspan="1"><span class="register">D</span>=floor nearest the kid (155, 162, 169)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30936"></a>30936</td>
<td class="instruction">LD L,C</td>
<td class="comment-11" rowspan="1"><span class="register">L</span>=142, 144 or 146</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30937"></a>30937</td>
<td class="instruction">LD A,H</td>
<td class="comment-11" rowspan="1">Store the kid's character number in <span class="register">A</span> temporarily</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30938"></a>30938</td>
<td class="instruction">LD H,127</td>
<td class="comment-11" rowspan="1"><span class="register">HL</span>=<a class="link" href="32652.html#32654">32654</a>, <a class="link" href="32652.html#32656">32656</a> or <a class="link" href="32652.html#32658">32658</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30940"></a>30940</td>
<td class="instruction">LD (HL),E</td>
<td class="comment-11" rowspan="3">Store the kid's normalised coordinates here</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30941"></a>30941</td>
<td class="instruction">INC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30942"></a>30942</td>
<td class="instruction">LD (HL),D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30943"></a>30943</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the next normalised coordinates slot</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30944"></a>30944</td>
<td class="instruction">LD C,L</td>
<td class="comment-11" rowspan="1">Save <span class="register">L</span> in <span class="register">C</span> temporarily</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30945"></a>30945</td>
<td class="instruction">LD H,A</td>
<td class="comment-11" rowspan="1">Restore the kid's character number (167-169) to <span class="register">H</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30946"></a>30946</td>
<td class="instruction">INC H</td>
<td class="comment-11" rowspan="1">Next kid</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30947"></a>30947</td>
<td class="instruction">DJNZ 30933</td>
<td class="comment-11" rowspan="1">Jump back until the three main kids have been done</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30949"></a>30949</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="2">Restore the teacher's character number (163-166) to <span class="register">H</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30950"></a>30950</td>
<td class="instruction">PUSH HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30951"></a>30951</td>
<td class="instruction">LD L,98</td>
<td class="comment-11" rowspan="4">Pick up the teacher's coordinates in <span class="register">DE</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30953"></a>30953</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30954"></a>30954</td>
<td class="instruction">DEC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30955"></a>30955</td>
<td class="instruction">LD D,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30956"></a>30956</td>
<td class="instruction">CALL <a class="link" href="28327.html">28327</a></td>
<td class="comment-11" rowspan="1">Get the lower and upper limits of the teacher's visibility range in <span class="register">C</span> and <span class="register">B</span></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30959"></a>
<div class="comments">
<div class="paragraph">
Now we enter a loop to calculate the distance of each main kid from the teacher.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30959"></a>30959</td>
<td class="instruction">LD HL,32659</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at EINSTEIN's normalised y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30962"></a>30962</td>
<td class="instruction">LD A,4</td>
<td class="comment-11" rowspan="1">There are four main kids to check</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30964"></a>30964</td>
<td class="instruction">PUSH AF</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30965"></a>30965</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1">Pick up a kid's normalised y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30966"></a>30966</td>
<td class="instruction">DEC HL</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the kid's x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30967"></a>30967</td>
<td class="instruction">CP D</td>
<td class="comment-11" rowspan="1">Compare the normalised y-coordinate with the teacher's y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30968"></a>30968</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=kid's x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30969"></a>30969</td>
<td class="instruction">LD (HL),255</td>
<td class="comment-11" rowspan="1">Default assumption: kid and teacher are on different floors</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30971"></a>30971</td>
<td class="instruction">JR NZ,30987</td>
<td class="comment-11" rowspan="1">Jump unless the kid's normalised y-coordinate matches the teacher's y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30973"></a>30973</td>
<td class="instruction">CP B</td>
<td class="comment-11" rowspan="5">Jump forward if the teacher cannot see the kid</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30974"></a>30974</td>
<td class="instruction">JR Z,30978</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30976"></a>30976</td>
<td class="instruction">JR NC,30987</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30978"></a>30978</td>
<td class="instruction">CP C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30979"></a>30979</td>
<td class="instruction">JR C,30987</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30981"></a>30981</td>
<td class="instruction">SUB E</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=distance between the teacher and the kid (possibly &lt; 0)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30982"></a>30982</td>
<td class="instruction">JR NC,30986</td>
<td class="comment-11" rowspan="1">Jump if the kid is to the right of the teacher (<span class="register">A</span>&gt;=0)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30984"></a>30984</td>
<td class="instruction">NEG</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30986"></a>30986</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-11" rowspan="1">Store the absolute distance between the teacher and the kid (if they are close to each other)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30987"></a>30987</td>
<td class="instruction">DEC HL</td>
<td class="comment-11" rowspan="4">Point <span class="register">HL</span> at the normalised y-coordinate of the next main kid and jump back until all four have been checked</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30988"></a>30988</td>
<td class="instruction">POP AF</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30989"></a>30989</td>
<td class="instruction">DEC A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30990"></a>30990</td>
<td class="instruction">JR NZ,30964</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="30992"></a>
<div class="comments">
<div class="paragraph">
Finally, we enter a loop to determine which main kid (if any) is closest to the teacher.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30992"></a>30992</td>
<td class="instruction">INC HL</td>
<td class="comment-11" rowspan="1"><span class="register">HL</span>=<a class="link" href="32652.html">32652</a> (holding ERIC's distance from the teacher)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30993"></a>30993</td>
<td class="instruction">LD B,4</td>
<td class="comment-11" rowspan="1">There are four main kids to consider</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30995"></a>30995</td>
<td class="instruction">LD A,255</td>
<td class="comment-11" rowspan="1">255 was used to signal that the kid was not on the same floor as the teacher</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="30997"></a>30997</td>
<td class="instruction">CP (HL)</td>
<td class="comment-11" rowspan="6">When this loop is finished, <span class="register">A</span> will hold the distance between the teacher and the closest main kid (or 255 if none of the kids were nearby)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="30998"></a>30998</td>
<td class="instruction">JR C,31001</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31000"></a>31000</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31001"></a>31001</td>
<td class="instruction">INC HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31002"></a>31002</td>
<td class="instruction">INC HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31003"></a>31003</td>
<td class="instruction">DJNZ 30997</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31005"></a>31005</td>
<td class="instruction">INC A</td>
<td class="comment-11" rowspan="1">Were any of the main kids close to the teacher?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31006"></a>31006</td>
<td class="instruction">JR NZ,31010</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31008"></a>31008</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">Restore the teacher's character number to <span class="register">H</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31009"></a>31009</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="31010"></a>
<div class="comments">
<div class="paragraph">
So at least one of the main kids is within range. Which one will get lines?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31010"></a>31010</td>
<td class="instruction">DEC A</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=distance between the teacher and the nearest kid</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31011"></a>31011</td>
<td class="instruction">LD L,140</td>
<td class="comment-11" rowspan="1"><span class="register">HL</span>=<a class="link" href="32652.html">32652</a> (holding ERIC's distance from the teacher)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31013"></a>31013</td>
<td class="instruction">INC D</td>
<td class="comment-11" rowspan="1"><span class="register">D</span>=teacher's y-coordinate + 1</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31014"></a>31014</td>
<td class="instruction">LD BC,2220</td>
<td class="comment-11" rowspan="1"><span class="register">B</span>=<a class="link" href="56704.html">8</a> (NOW DON'T DO IT AGAIN), <span class="register">C</span>=172 (ERIC)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31017"></a>31017</td>
<td class="instruction">CP (HL)</td>
<td class="comment-11" rowspan="1">Is ERIC closest to the teacher?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31018"></a>31018</td>
<td class="instruction">JR Z,31028</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31020"></a>31020</td>
<td class="instruction">LD C,166</td>
<td class="comment-11" rowspan="6">On exit from this loop, <span class="register">C</span> will hold 167 (BOY WANDER), 168 (ANGELFACE), or 169 (EINSTEIN)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31022"></a>31022</td>
<td class="instruction">INC C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31023"></a>31023</td>
<td class="instruction">INC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31024"></a>31024</td>
<td class="instruction">INC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31025"></a>31025</td>
<td class="instruction">CP (HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31026"></a>31026</td>
<td class="instruction">JR NZ,31022</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31028"></a>31028</td>
<td class="instruction">LD A,C</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=character number of the kid closest to the teacher</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31029"></a>31029</td>
<td class="instruction">CALL <a class="link" href="30464.html">30464</a></td>
<td class="comment-11" rowspan="1">Give lines to the kid who is closest to the teacher</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31032"></a>31032</td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">Restore the teacher's character number to <span class="register">H</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31033"></a>31033</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="30888.html">30888</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#30890">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="31034.html">31034</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Skool Daze RAM disassembly 20150413</div>
<div class="copyright">&#169; 1984 Microsphere Computer Services Ltd (Skool Daze). &#169; 2015 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://skoolkit.ca/">SkoolKit</a> 4.3.</div>
</div>
</body>
</html>